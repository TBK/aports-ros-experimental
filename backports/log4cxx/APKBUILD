# Contributor: Atsushi Watanabe <atsushi.w@ieee.org>
# Maintainer:
pkgname=log4cxx
pkgver=0.10.0_git20180321
pkgrel=1
pkgdesc="Logging framework for C++ patterned after Apache log4j"
url="https://logging.apache.org/log4cxx/latest_stable/index.html"
arch="all"
license="Apache-2.0"
depends=""
makedepends="apr-dev apr-util-dev autoconf automake libtool gzip zip"
subpackages="$pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://git-wip-us.apache.org/repos/asf?p=logging-log4cxx.git;a=snapshot;h=5f825186936a1876f92b88b371334ff26e997287;sf=tgz"

builddir="$srcdir/logging-log4cxx-5f82518"

build() {
	cd "$builddir"

	./autogen.sh
	mkdir -p build && cd build
	../configure \
		--prefix=/usr \
		CXXFLAGS="-Os -Wno-narrowing"
	make
}

check() {
	cd "$builddir"/build
	make check
}

package() {
	cd "$builddir"/build
	make DESTDIR="$pkgdir" install

	install -d -m 0755 "$pkgdir"/usr/share/licenses/log4cxx
	install -m 0644 "$builddir"/LICENSE "$pkgdir"/usr/share/licenses/log4cxx
}

sha512sums="7081368bce1d404459f96dc694c46a34bad6602b26fecc7e8ab78f31f7a77fc7b735749fef4631c39c8e51de08c2d293d766733baf980775fd3c6c134dfef491  logging-log4cxx-5f82518.tar.gz"
